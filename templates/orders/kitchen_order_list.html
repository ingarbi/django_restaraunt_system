<div class="row g-4">
  {% for order in orders %}
    <div class="col-lg-3 col-md-4 col-sm-6">
      <div class="card-order border border-2 border border-secondary-subtle shadow-lg rounded-4 h-100 d-flex flex-column overflow-hidden" id="order-{{ order.id }}">
        <!-- Header with dynamic background based on order type -->
        <div class="px-3 py-2 d-flex justify-content-between align-items-center  
                {% if order.order_type == 'dine_in' %}
            
                    bg-primary text-white

          {% elif order.order_type == 'takeaway' %}
            
                    bg-warning text-dark

          {% elif order.order_type == 'delivery' %}
            
                    bg-success text-white

          {% elif order.order_type == 'free' %}
            
                    bg-secondary text-white

          {% else %}
            
                    bg-dark text-white

          {% endif %}
                ">
          <h5 class="mb-0 fw-bold">–ó–∞–∫–∞–∑ #{{ order.order_number|slice:'12:' }}</h5>
          <small class="fw-semibold">{{ order.created_at|date:'H:i' }}</small>
        </div>

        <!-- Body -->
        <div class="card-body flex-fill ">
          {% comment %} <a href="{% url 'order_detail' order.id %}" class="text-decoration-none text-dark">
            {% endcomment %}

            <!-- Order Type Badge -->
            <p class="mb-2">
              <span class="badge rounded-pill 
                    {% if order.order_type == 'dine_in' %}
                  
                    bg-primary

                {% elif order.order_type == 'takeaway' %}
                  
                    bg-warning text-dark

                {% elif order.order_type == 'delivery' %}
                  
                    bg-success

                {% elif order.order_type == 'free' %}
                  
                    bg-secondary

                {% else %}
                  
                    bg-dark

                {% endif %}
                ">
                {% if order.order_type == 'dine_in' %}
                  –í –∑–∞–ª–µ
                {% elif order.order_type == 'takeaway' %}
                  –ù–∞ –≤—ã–Ω–æ—Å
                {% elif order.order_type == 'delivery' %}
                  –î–æ—Å—Ç–∞–≤–∫–∞
                {% elif order.order_type == 'free' %}
                  –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
                {% else %}
                  –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                {% endif %}
              </span>

              <!-- Payment Type Icon -->
              {% if order.payment_type == 'cash' %}
                üíµ
              {% elif order.payment_type == 'online' %}
                üí≥
              {% elif order.payment_type == 'free' %}
                üéÅ
              {% endif %}
            </p>
            <!-- Order Items -->
            <ol class="mb-0 ps-3">
              {% for item in order.items.all %}
                <li class="mb-2 fs-6">
                  {{ item.menu_item.name }}
                  <span class="fw-bold text-primary">√ó{{ item.quantity }}</span>
                </li>
              {% endfor %}
            </ol>
          </a>
        </div>

        <!-- Footer -->
        <div class="text-center p-3 border-top border-2 mt-auto">
         <button 
                type="button" 
                class="btn btn-sm fw-bold text-light order-ready-btn {{ order.order_type }}" 
                data-bs-toggle="modal" 
                data-bs-target="#deliverModal{{ order.id }}"
            >
                –ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤
            </button>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="deliverModal{{ order.id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deliverModalLabel{{ order.id }}" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content rounded-4 shadow-lg border border-2">
          <div class="modal-header 
            {% if order.order_type == 'dine_in' %}
               bg-primary text-white

            {% elif order.order_type == 'takeaway' %}
               bg-warning text-dark

            {% elif order.order_type == 'delivery' %}
               bg-success text-white

            {% elif order.order_type == 'free' %}
               bg-secondary text-white

            {% else %}
               bg-dark text-white

            {% endif %} 
            rounded-top-4">
            <h5 class="modal-title" id="deliverModalLabel{{ order.id }}">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å</h5>
            <button type="button" class="btn-close {% if order.order_type != 'takeaway' %}btn-close-white{% endif %}" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
          </div>
          <div class="modal-body fs-5">
            –ó–∞–∫–∞–∑ <strong>#{{ order.order_number|slice:'12:' }}</strong> –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ <span class="text-success fw-bold">–≥–æ—Ç–æ–≤—ã–π</span>.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
            <a href="{% url 'mark_order_completed' order.id %}" class="btn btn-success fw-bold px-4">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</a>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
